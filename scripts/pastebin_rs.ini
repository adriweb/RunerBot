[script]
n0=on *:sockopen:pastebin*: {
n1=  ;echo -s sockopen $sockname
n2=  var %params $gettok($sock($sockname).mark,1,32)
n3=  var %file $gettok($sock($sockname).mark,2,$asc("))
n4=  sockmark $sockname $gettok($sock($sockname).mark,3-,$asc("))
n5=  var %len $len(%params)
n6=  var %i 1
n7=  while %i <= $lines(%file) {
n8=    var %r $read(%file,nt,%i)
n9=    inc %len $len($encodeurl(%r))
n10=    inc %len 3
n11=    inc %i
n12=  }
n13=  sockwrite -n $sockname POST /api/api_post.php HTTP/1.1
n14=  sockwrite -n $sockname Host: pastebin.com
n15=  sockwrite -n $sockname Content-Type: application/x-www-form-urlencoded
n16=  sockwrite -n $sockname Content-length: %len
n17=  sockwrite $sockname $crlf
n18=  sockwrite $sockname %params
n19=  var %i 1
n20=  while %i <= $lines(%file) {
n21=    var %r $read(%file,nt,%i)
n22=    sockwrite $sockname $+($encodeurl(%r),%,0A)
n23=    inc %i
n24=  }
n25=  .timer $+ $sockname 1 3 pastebin.return $sockname error
n26=}
n27=on *:sockread:pastebin*: {
n28=  var %r
n29=  sockread %r
n30=  ;echo -s sockread $sockname %r
n31=  if ((HTTP/* iswm %r) && ($gettok(%r,2,32) != 200)) || (ERROR* iswm %r) || (0 == %r) {
n32=    pastebin.return $sockname error
n33=  }
n34=  if http://* iswm %r {
n35=    pastebin.return $sockname %r
n36=  }
n37=}
