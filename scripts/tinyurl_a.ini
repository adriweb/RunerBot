[aliases]
n0=/tinyurl {
n1=  var %sockname
n2=  while (%sockname == $null) || ($sock(%sockname) != $null) {
n3=    var %sockname $+(tinyurl.,$rand(1,999999999999))
n4=  }
n5=  sockopen %sockname is.gd 80
n6=  sockmark %sockname $1-
n7=  .timer $+ %sockname 1 3 tinyurl.return %sockname error $1
n8=}
n9=/tinyurl.return {
n10=  .timer $+ $1 off
n11=  var %action $gettok($sock($1).mark,2-,32)
n12=  sockclose $1
n13=  ;echo -s action: %action
n14=  %action $2-
n15=}
