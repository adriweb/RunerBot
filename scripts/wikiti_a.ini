[aliases]
n0=/wikiti {
n1=  var %tinyurl 0
n2=  var %get
n3=  if -* iswm $1 {
n4=    var %flags $right($1,-1)
n5=    tokenize 32 $2-
n6=    var %f in
n7=    while %f != $null {
n8=      if %f == t {
n9=        var %tinyurl 1
n10=      }
n11=      elseif %f == g {
n12=        var %get $1
n13=        tokenize 32 $2-
n14=      }
n15=      elseif %f != in {
n16=        ;handle error
n17=      }
n18=      var %f $left(%flags,1)
n19=      var %flags $right(%flags,-1)
n20=    }
n21=  }
n22=  var %sockname
n23=  while (%sockname == $null) || ($sock(%sockname) != $null) {
n24=    var %sockname $+(wikiti.,$rand(1,999999999999))
n25=  }
n26=  sockopen %sockname wikiti.brandonw.net 80
n27=  sockmark %sockname /index.php?title= $+ $1 $iif(%get != $null,1 %get,0 0) $iif(%tinyurl,wikiti.tinyurl.1) $2- 
n28=}
n29=/wikiti.tinyurl.1 {
n30=  var %last $gettok($1-,$numtok($1-,32),32)
n31=  if *wikiti.brandonw.net* !iswm %last {
n32=    $1-
n33=  }
n34=  else {
n35=    tinyurl %last wikiti.tinyurl.2 $1-
n36=  }
n37=}
n38=/wikiti.tinyurl.2 {
n39=  var %errindex $numtok($1-,32)
n40=  if $gettok($1-,%errindex,32) == error {
n41=    tokenize 32 $deltok($1-,%erindex,32)
n42=  } 
n43=  else {
n44=    tokenize 32 $deltok($1-,$calc(%errindex - 1),32)
n45=  }
n46=  $1-
n47=}
